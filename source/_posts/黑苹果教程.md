---
title: 黑苹果教程
date: 2019-08-26 00:36:36
tags:
	- 兴趣
	- 黑苹果
	- 教程
---
### 第一章：目的
*将台式机安装成win10和黑苹果系统*
* 制作U盘启动
* EFI设置
* 安装黑苹果

<!-- more -->
### 第二章：内容
黑苹果制作主要是驱动能不能打上，所以不是所有电脑都可以安装黑苹果，需要上网确认。一般认为最基本的功能WiFi，显卡，声卡能驱动即可，其他的需要去不断完善。当然WiFi可以淘宝购买黑苹果USB免驱WiFi；声卡如果不能也可以买蓝牙免驱，然后用蓝牙音响即可（不是太方便，同时蓝牙可能有些延迟）；最重要的是显卡，一般inter的集成显卡都可以驱动（不太老的电脑），但是独立显卡不一定能，总之需要至少一个显卡可以驱动，如果都不行，请放弃吧（显卡不能驱动，基本视频等都不能用）。
#### 制作U盘启动
制作黑苹果教程最好有macOS系统环境，虚拟机也可，以下教程均需要macOS系统。
##### 准备工具：
* 系统镜像
* U盘大于8G
* etcher软件

##### 开始制作
1. 系统[镜像下载](https://blog.daliansky.net/macOS-Mojave-10.14.6-18G87-Release-version-with-Clover-5033-original-image.html#more)，可以在该博主的网站下载最新镜像，同时该博主有非常多的黑苹果教程，推荐看看。
2. 苹果系统下载etcher软件，并安装。
3. 打开镜像(.dmg格式)，选择U盘（可以提前用macOS的磁盘工具主分区格式化），点击Flash即可。
4. 有可能会安装失败，请重新安装即可。或者在win系统下用winmd5检查md5值，一致说明下载的系统镜像没问题。
 ![黑苹果0](/img/黑苹果0.png)
 等待安装完成即可。
 
#### EFI设置
##### 将EFI文件复制到USB安装盘的EFI分区下
 前面的步骤仅仅是安装镜像，如何让电脑识别U盘并引导安装就需要EFI文件。前面的制作U盘其实已经将U盘的EFI位置大概200m分隔出来，只是无法看到。这时需要将磁盘信息显示出来即可。
1. 显示磁盘信息 
 打开终端，输入命令：`diskutil list`，会得到类似的代码: 
 ```
 /dev/disk4 (disk image):
   #:                       TYPE NAME                    SIZE   IDENTIFIER
   0:      GUID_partition_scheme                        +8.0 GB     disk4
   1:                        EFI EFI                     209.7 MB   disk4s1
   2:                  Apple_HFS XiaoMiPro 10131         7.7 GB     disk4s2
 ```
 可以看到EFI文件夹位置为`disk4s1`。
2. 挂载 
 输入命令：
```
sudo diskutil mount disk4s1
#输入密码即可
open .

注意：open 后面有个空格.
```
 挂载成功后即可在访达中看到，类似于经过一番设置，显示出了隐藏文件夹。这样就可以将自己的EFI文件复制其中。
 *也可以用clover软件重新安装一遍EFI，这样直接能看到文件夹。*
 
##### EFI文件说明
![黑苹果1](/img/黑苹果1.png)
如图：EFI文件夹一般两个文件`BOOT`,`CLOVER`
需要解释的是clover里面的文件：
1. config.plist（默认名称）
 引导文件，一般根据显卡，更名为默认名称即可。这样显卡就会直接驱动成功。
2. drivers64UEFI 
 驱动文件，里面的驱动容易导致引导失败，因此我建议少装。当然如果原装的EFI文件里的能引导成功就不需要管。以下四个驱动是我找的，原理不清楚，试错得来的，如果不能引导，试试仅保留下面名称文件。
 ![黑苹果2](/img/黑苹果2.png)
3. kexts 
 同样是驱动
#### 安装黑苹果

##### BIOS设置
 首先笔记本或者台式机需要对bios进行设置，才能正常引导，如：
1. 建议关闭
  `安全启动关闭`
  `快速启动关闭`
  `Wake on LAN`
  `LAN/WLAN Switching` 
  `Firewire`
  `Parallels Port` 
  `Serial Port`
2. 建议开启
  `UEFI安装（必须）` 
  `优先USB引导`
 
##### 开始安装
1. 进入clover主菜单，选择install安装Mac系统
2. 开始引导
 ![黑苹果02](/img/黑苹果02.png)
 这一步容易出错，有啰嗦模式进行排错，具体看[教程](https://blog.daliansky.net/clover-user-manual.html)。
3. 选择语言
4. 磁盘工具
  *选择磁盘工具* 
  ![黑苹果3](/img/黑苹果3.png) 
  *选择显示所有设备* 
  ![黑苹果4](/img/黑苹果4.png) 
  *点击所要安装mac的硬盘，点击`抹掉`按钮，选择`Mac OS扩展(日志型)`，名称可自定义。* 
	***假设您的磁盘是空的且数据是已经备份过的,别怪我没提醒你!!!*** 
  ![黑苹果5](/img/黑苹果5.png) 
5. 开始安装，选择刚刚格式化的硬盘，一直按提示点击即可，一般选择不要联网的（网卡驱动没有）。
 ![黑苹果6](/img/黑苹果6.png)
6. 安装完成
 ![黑苹果7](/img/黑苹果7.png)
##### U盘启动改硬盘启动
需要挂载U盘和硬盘中的EFI分区
```
diskutil list   #显示所有盘符
sudo diskutil mount disk1s1 #选择需要挂载的硬盘，并输入密码
open .  #打开它
```
这样就可以将U盘的EFI文件下的文件复制到硬盘的EFI文件夹中，重启clover主界面选择`clover boot option`回车，选择`add clover boot option for all entries`按空格键，拔掉U盘即可。
##### clover主界面设置
###### 关闭多余启动项
clover主界面有非常多的无关启动项，为了美观需要将之隐藏。主要就是将无用的启动项，用配置文件隐藏起来。
挂载硬盘EFI文件夹，使用工具clover configurator，点击clover文件夹中config.plist文件。

**注意备份文件，一般的是U盘文件不动，这样即使出错了，U盘启动还能用，进系统后再将硬盘中EFI覆盖，恢复原来的设置。**
1. 打开 `Clover configurator`，在左边的 `TOOLS` 里找到并点击 `Boot.log` 栏，点击右下角的 `Generate log`，生成日志，出现下图： 
 ![黑苹果8](/img/黑苹果8.png)
2. 按下` Command+F` 调出搜索框，在里面输入 `ScanLoader` 进行搜索，下图红框圈出来的，位于 [xx]:启动项就是启动项名： 
 ![黑苹果9](/img/黑苹果9.png)
3. 点击左边 `SECTIONS` 里的 `Gui` 栏，在 `Hide Volume` 里填入你想要隐藏的启动项名称即可：  
	```
	Recovery
	VM
	Preboot
	注意：不带' 哦
	```
 ![黑苹果10](/img/黑苹果10.png)
 退出保存，并重启计算机。
###### 启动设置
设置启动时间和默认启动系统
打开 `Clover configurator`，在左边 `SECTIONS` 里找到并点击` Boot` 栏，在图中找到 `Default Boot Volume`，选择` LastBootedVolume`，这样每次重新开机就好启动上次加载的系统啦当然，建议设置延时哦，这样方便切换系统

| 选项 |功能  |
| --- | --- |
| x:Timeout |延迟 x 秒启动|
|-1  | 取消延迟启动 |
| Fast |不显示 Clover 界面，快速启动|

![黑苹果11](/img/黑苹果11.png)
**这样clover界面美化完成，重启电脑，看看自己的杰作吧。**
